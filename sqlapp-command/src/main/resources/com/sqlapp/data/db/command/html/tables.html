<!--
    Copyright (C) 2007-2017 Tatsuo Satoh <multisqllib@gmail.com>

    This file is part of sqlapp-command.

    sqlapp-command is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    sqlapp-command is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public License
    along with sqlapp-command.  If not, see <http://www.gnu.org/licenses/>.
-->

@code{
int uniqueConsCount=0;
int checkConsCount=0;
int parentsCount=0;
int childenCount=0;
int excludeConsCount=0;
int constraintsColspan=1;
for(obj : list){
	uniqueConsCount=uniqueConsCount+obj.constraints.uniqueConstraints.size();
	checkConsCount=checkConsCount+obj.constraints.checkConstraints.size();
	parentsCount=parentsCount+obj.constraints.foreignKeyConstraints.size();
	childenCount=childenCount+obj.childRelations.size();
	excludeConsCount=excludeConsCount+obj.constraints.excludeConstraints.size();
}
if (checkConsCount>0){
	constraintsColspan++;
}
if (excludeConsCount>0){
	constraintsColspan++;
}
int i=0;
int j=0;
int no=1;
}
<div class="panel panel-default">
	<div class="header">
	</div>
	<div class="body">
		<input id="searchable" type="search" placeholder="Search..."/>
		<details id="columnFilter">
			<summary>Column Filter</summary>
		</details>
		<table id="mainTable" @{attr("class", renderOptions.tableClass)}>
		<thead>
			<tr>
				<!-- include(incTableSchemaHeader.html) -->
				<th rowspan="2" @{renderOptions.tableHeaderColAttr("Columns")}>Columns</th>
				<th rowspan="2" @{renderOptions.tableHeaderColAttr("Indexes")}>Indexes</th>
				<th colspan="2" @{renderOptions.tableHeaderColAttr("Relations")}>Relations</th>
				<th colspan="@{constraintsColspan}" @{renderOptions.tableHeaderColAttr("Constraints")}>Constraints</th>
				@if{_prefix.readonlyCount>0}
				<th rowspan="2" @{renderOptions.tableHeaderColAttr("Readonly")}>Readonly</th>
				@end{}
				@if{_prefix.compressionCount>0}
				<th rowspan="2" @{renderOptions.tableHeaderColAttr("Compression")}>Compression</th>
				@end{}
				@if{_prefix.typeCount>0}
				<th rowspan="2" @{renderOptions.tableHeaderColAttr("Type")}>Type</th>
				@end{}
				@if{_prefix.dataStoreTypeCount>0}
				<th rowspan="2" @{renderOptions.tableHeaderColAttr("DataStoreType")}>Data Store Type</th>
				@end{}
				@if{_prefix.partitioningCount>0}
				<th rowspan="2" @{renderOptions.tableHeaderColAttr("Partitioning")}>Partitioning</th>
				@end{}
				@if{_prefix.statementCount>0}
				<th rowspan="2" @{renderOptions.tableHeaderColAttr("Statement")}>Statement(Lines)</th>
				@end{}
				@if{_prefix.definitionCount>0}
				<th rowspan="2" @{renderOptions.tableHeaderColAttr("Definition")}>Definition(Lines)</th>
				@end{}
				<!-- include(incTableHeader1.html) -->
			</tr>
			<tr>
				<th @{renderOptions.tableHeaderColAttr("Relations")}>Parents</th>
				<th @{renderOptions.tableHeaderColAttr("Relations")}>Children</th>
				<th @{renderOptions.tableHeaderColAttr("Constraints")}>Unique</th>
				@if{checkConsCount>0}
				<th @{renderOptions.tableHeaderColAttr("Constraints")}>Check</th>
				@end{}
				@if{excludeConsCount>0}
				<th @{renderOptions.tableHeaderColAttr("Constraints")}>Exclude</th>
				@end{}
				<!-- include(incTableHeader2.html) -->
			</tr>
		</thead>
		<tfoot>
			<tr>
				<!-- include(incTableSchemaFooter.html) -->
				<td @{renderOptions.tableHeaderColAttr("Columns")}>@{zeroToEmpty(columnsCount)}</td>
				<td @{renderOptions.tableHeaderColAttr("Indexes")}>@{zeroToEmpty(indexesCount)}</td>
				<td @{renderOptions.tableHeaderColAttr("Relations")}>@{zeroToEmpty(parentsCount)}</td>
				<td @{renderOptions.tableHeaderColAttr("Relations")}>@{zeroToEmpty(childenCount)}</td>
				<td @{renderOptions.tableHeaderColAttr("Constraints")}>@{zeroToEmpty(uniqueConsCount)}</td>
				@if{checkConsCount>0}
				<td @{renderOptions.tableHeaderColAttr("Constraints")}>@{zeroToEmpty(checkConsCount)}</td>
				@end{}
				@if{excludeConsCount>0}
				<td @{renderOptions.tableHeaderColAttr("Constraints")}>@{zeroToEmpty(excludeConsCount)}</td>
				@end{}
				@if{_prefix.readonlyCount>0}
				<td @{renderOptions.tableHeaderColAttr("Readonly")}>@{zeroToEmpty(readonlyCount)}</td>
				@end{}
				@if{_prefix.compressionCount>0}
				<td @{renderOptions.tableHeaderColAttr("Compression")}>@{zeroToEmpty(compressionCount)}</td>
				@end{}
				@if{_prefix.typeCount>0}
				<td @{renderOptions.tableHeaderColAttr("Type")}></td>
				@end{}
				@if{_prefix.dataStoreTypeCount>0}
				<td @{renderOptions.tableHeaderColAttr("DataStoreType")}></td>
				@end{}
				@if{_prefix.partitioningCount>0}
				<td @{renderOptions.tableHeaderColAttr("Partitioning")}>@{zeroToEmpty(partitioningCount)}</td>
				@end{}
				@if{_prefix.statementCount>0}
				<td @{renderOptions.tableHeaderColAttr("Statement")}>@{zeroToEmpty(statementCount)}</td>
				@end{}
				@if{_prefix.definitionCount>0}
				<td @{renderOptions.tableHeaderColAttr("Definition")}>@{zeroToEmpty(definitionCount)}</td>
				@end{}
				<!-- include(incTableFooter.html) -->
			</tr>
		</tfoot>
		<tbody class="tbody_class">
			@foreach{obj : list}<tr>
				<!-- include(incTableSchemaBody.html) -->
				<td @{renderOptions.tableBodyColAttr("Columns")}>@{zeroToEmpty(obj.columns.size())}</td>
				<td @{renderOptions.tableBodyColAttr("Indexes")}>@{zeroToEmpty(obj.indexes.size())}</td>
				<td @{renderOptions.tableBodyColAttr("Relations")}>@{zeroToEmpty(obj.constraints.foreignKeyConstraints.size())}</td>
				<td @{renderOptions.tableBodyColAttr("Relations")}>@{zeroToEmpty(obj.childRelations.size())}</td>
				<td @{renderOptions.tableBodyColAttr("Constraints")}>@{zeroToEmpty(obj.constraints.uniqueConstraints.size())}</td>
				@if{checkConsCount>0}
				<td @{renderOptions.tableBodyColAttr("Constraints")}>@{zeroToEmpty(obj.constraints.checkConstraints.size())}</td>
				@end{}
				@if{excludeConsCount>0}
				<td @{renderOptions.tableBodyColAttr("Constraints")}>@{zeroToEmpty(obj.constraints.excludeConstraints.size())}</td>
				@end{}
				@if{_prefix.readonlyCount>0}
				<td @{renderOptions.tableBodyColAttr("Readonly")}>@{renderOptions.checkIcon(obj.readonly)}</td>
				@end{}
				@if{_prefix.compressionCount>0}
				<td @{renderOptions.tableBodyColAttr("Compression")}>@{renderOptions.checkIcon(obj.compression)}</td>
				@end{}
				@if{_prefix.typeCount>0}
				<td @{renderOptions.tableBodyColAttr("Type")}>@{obj.tableType}</td>
				@end{}
				@if{_prefix.dataStoreTypeCount>0}
				<td @{renderOptions.tableBodyColAttr("DataStoreType")}>@{obj.dataStoreType}</td>
				@end{}
				@if{_prefix.partitioningCount>0}
				<td @{renderOptions.tableBodyColAttr("Partitioning")}>@{renderOptions.checkIcon(obj.partitioning!=null)}</td>
				@end{}
				@if{_prefix.statementCount>0}
				<td @{renderOptions.tableBodyColAttr("Statement")}>@{zeroToEmpty(obj.statement.size())}</td>
				@end{}
				@if{_prefix.definitionCount>0}
				<td @{renderOptions.tableBodyColAttr("Definition")}>@{zeroToEmpty(obj.definition.size())}</td>
				@end{}
				<!-- include(incTableBody.html) -->
			</tr>@end{}
		</tbody>
		</table>
	</div>
</div>
